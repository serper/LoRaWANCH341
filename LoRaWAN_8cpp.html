<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoRaWANCH341 Library: src/LoRaWAN.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LoRaWANCH341 Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle"><div class="title">LoRaWAN.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> protocol for communication with <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> networks.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;openssl/evp.h&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &quot;<a class="el" href="LoRaWAN_8hpp_source.html">LoRaWAN.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="RFM95_8hpp_source.html">RFM95.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AES-CMAC_8hpp_source.html">AES-CMAC.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SessionManager_8hpp_source.html">SessionManager.hpp</a>&quot;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;queue&gt;</code><br />
<code>#include &lt;mutex&gt;</code><br />
<code>#include &lt;array&gt;</code><br />
<code>#include &lt;deque&gt;</code><br />
<code>#include &lt;bitset&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for LoRaWAN.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="LoRaWAN_8cpp__incl.png" border="0" usemap="#asrc_2LoRaWAN_8cpp" alt=""/></div>
<map name="asrc_2LoRaWAN_8cpp" id="asrc_2LoRaWAN_8cpp">
<area shape="rect" title="Implementation of the LoRaWAN protocol for communication with LoRaWAN networks." alt="" coords="902,5,1037,31"/>
<area shape="rect" title=" " alt="" coords="172,79,284,104"/>
<area shape="poly" title=" " alt="" coords="902,26,641,46,298,81,297,76,641,41,902,21"/>
<area shape="rect" title=" " alt="" coords="308,79,383,104"/>
<area shape="poly" title=" " alt="" coords="902,26,681,45,541,61,397,81,396,76,541,55,681,40,902,21"/>
<area shape="rect" title=" " alt="" coords="407,79,492,104"/>
<area shape="poly" title=" " alt="" coords="902,29,723,50,506,81,505,81,504,76,505,76,722,45,902,24"/>
<area shape="rect" title=" " alt="" coords="517,79,579,104"/>
<area shape="poly" title=" " alt="" coords="902,32,762,53,599,81,593,82,592,77,598,76,761,48,901,26"/>
<area shape="rect" href="LoRaWAN_8hpp.html" title="Class declaration for LoRaWAN protocol communication." alt="" coords="178,152,291,177"/>
<area shape="poly" title=" " alt="" coords="902,33,804,52,696,81,666,94,637,107,547,128,475,138,403,144,311,155,305,156,304,150,310,149,402,138,475,132,546,123,635,101,664,89,694,76,803,47,901,28"/>
<area shape="rect" title=" " alt="" coords="1097,299,1153,324"/>
<area shape="poly" title=" " alt="" coords="996,28,1070,64,1165,115,1254,171,1287,198,1308,224,1313,238,1307,252,1285,269,1249,284,1168,305,1166,300,1247,279,1282,265,1303,249,1307,238,1303,227,1283,202,1251,175,1163,119,1068,69,993,33"/>
<area shape="rect" title=" " alt="" coords="5,225,72,251"/>
<area shape="poly" title=" " alt="" coords="902,27,777,45,706,60,637,81,615,94,593,107,543,116,480,120,332,120,257,121,187,125,128,136,104,144,84,154,71,166,61,181,47,213,42,211,56,178,67,163,81,150,102,139,127,131,186,120,257,115,332,114,480,114,543,111,591,101,613,89,635,76,705,55,776,39,901,22"/>
<area shape="rect" href="RFM95_8hpp.html" title="Header file for RFM95 LoRa Module Handler." alt="" coords="706,79,801,104"/>
<area shape="poly" title=" " alt="" coords="935,33,802,77,800,72,934,28"/>
<area shape="rect" title=" " alt="" coords="853,225,917,251"/>
<area shape="poly" title=" " alt="" coords="967,32,897,213,892,211,962,30"/>
<area shape="rect" href="AES-CMAC_8hpp.html" title=" " alt="" coords="1174,225,1293,251"/>
<area shape="poly" title=" " alt="" coords="985,29,1210,214,1207,218,981,33"/>
<area shape="rect" href="SessionManager_8hpp.html" title=" " alt="" coords="942,225,1098,251"/>
<area shape="poly" title=" " alt="" coords="975,30,1017,211,1012,212,969,32"/>
<area shape="rect" title=" " alt="" coords="1159,79,1239,104"/>
<area shape="poly" title=" " alt="" coords="1007,28,1149,72,1147,77,1005,33"/>
<area shape="rect" title=" " alt="" coords="1263,79,1326,104"/>
<area shape="poly" title=" " alt="" coords="1028,28,1250,76,1249,81,1027,33"/>
<area shape="rect" title=" " alt="" coords="1351,79,1415,104"/>
<area shape="poly" title=" " alt="" coords="1037,26,1172,46,1338,76,1337,81,1171,51,1036,31"/>
<area shape="rect" title=" " alt="" coords="1439,79,1502,104"/>
<area shape="poly" title=" " alt="" coords="1037,23,1210,42,1426,76,1425,81,1209,48,1036,28"/>
<area shape="rect" title=" " alt="" coords="1527,79,1585,104"/>
<area shape="poly" title=" " alt="" coords="1037,21,1246,38,1378,54,1513,76,1513,81,1377,60,1246,44,1037,26"/>
<area shape="rect" title=" " alt="" coords="121,299,199,324"/>
<area shape="poly" title=" " alt="" coords="227,179,194,227,170,287,165,285,190,224,223,176"/>
<area shape="rect" title=" " alt="" coords="759,299,822,324"/>
<area shape="poly" title=" " alt="" coords="252,175,311,212,349,232,389,248,486,274,585,291,675,301,746,306,745,311,675,307,585,297,485,280,387,253,347,237,308,217,249,180"/>
<area shape="poly" title=" " alt="" coords="292,174,541,223,592,236,643,248,764,265,859,273,954,280,1075,296,1084,298,1083,303,1074,301,953,285,858,278,763,271,642,253,591,241,539,228,291,179"/>
<area shape="rect" title=" " alt="" coords="435,299,493,324"/>
<area shape="poly" title=" " alt="" coords="242,176,262,212,277,232,295,249,325,267,358,282,422,300,420,305,357,287,323,272,292,253,273,235,258,215,237,179"/>
<area shape="rect" title=" " alt="" coords="274,299,361,324"/>
<area shape="poly" title=" " alt="" coords="236,178,235,212,238,231,245,249,263,272,285,289,281,293,259,275,240,252,233,233,230,212,230,178"/>
<area shape="poly" title=" " alt="" coords="204,180,84,223,83,218,202,175"/>
<area shape="rect" href="SPIInterface_8hpp.html" title=" " alt="" coords="400,225,528,251"/>
<area shape="poly" title=" " alt="" coords="272,175,414,219,413,224,271,180"/>
<area shape="poly" title=" " alt="" coords="416,253,213,300,211,295,415,248"/>
<area shape="poly" title=" " alt="" coords="517,248,747,298,745,303,516,253"/>
<area shape="poly" title=" " alt="" coords="467,251,467,285,461,285,461,251"/>
<area shape="poly" title=" " alt="" coords="442,253,355,295,352,290,439,248"/>
<area shape="rect" title=" " alt="" coords="996,299,1063,324"/>
<area shape="poly" title=" " alt="" coords="528,246,547,248,983,302,982,307,546,253,528,251"/>
<area shape="poly" title=" " alt="" coords="706,100,167,154,157,168,150,184,145,219,148,255,155,285,150,286,143,256,140,219,145,182,152,165,164,150,706,95"/>
<area shape="poly" title=" " alt="" coords="761,103,777,151,788,224,793,285,787,285,783,224,772,153,756,105"/>
<area shape="poly" title=" " alt="" coords="706,105,624,126,528,154,442,189,410,208,390,227,386,244,394,260,410,276,430,290,427,294,406,280,389,263,381,244,386,224,407,203,439,184,526,149,622,120,705,100"/>
<area shape="poly" title=" " alt="" coords="706,100,636,107,522,112,375,116,230,128,169,139,122,154,102,167,84,182,56,215,52,212,81,178,99,162,120,150,168,134,229,123,375,111,522,106,636,101,706,95"/>
<area shape="poly" title=" " alt="" coords="731,107,500,222,498,217,729,102"/>
<area shape="poly" title=" " alt="" coords="801,92,874,100,960,121,1004,138,1045,160,1082,189,1113,224,1118,234,1118,245,1109,264,1090,281,1069,294,1066,290,1087,276,1104,261,1113,244,1112,235,1108,227,1078,193,1042,165,1002,143,959,126,873,105,801,97"/>
<area shape="rect" href="CH341SPI_8hpp.html" title="Header file for the CH341SPI class, which implements the SPIInterface for the CH341 USB to SPI adapte..." alt="" coords="649,152,762,177"/>
<area shape="poly" title=" " alt="" coords="748,106,723,142,718,139,743,103"/>
<area shape="poly" title=" " alt="" coords="775,102,806,123,837,150,860,181,877,212,872,214,855,184,833,154,802,127,772,106"/>
<area shape="poly" title=" " alt="" coords="715,176,779,285,775,288,710,179"/>
<area shape="poly" title=" " alt="" coords="687,180,496,294,493,289,685,175"/>
<area shape="poly" title=" " alt="" coords="667,180,517,224,516,219,666,175"/>
<area shape="rect" title=" " alt="" coords="654,225,727,251"/>
<area shape="poly" title=" " alt="" coords="706,178,698,212,693,211,700,177"/>
<area shape="poly" title=" " alt="" coords="735,175,844,218,842,223,733,180"/>
<area shape="poly" title=" " alt="" coords="1174,251,836,305,835,300,1173,246"/>
<area shape="poly" title=" " alt="" coords="1217,253,1156,293,1153,289,1215,248"/>
<area shape="poly" title=" " alt="" coords="1201,253,1076,297,1074,292,1200,248"/>
<area shape="rect" title=" " alt="" coords="1198,299,1269,324"/>
<area shape="poly" title=" " alt="" coords="1236,251,1236,285,1231,285,1231,251"/>
<area shape="poly" title=" " alt="" coords="984,253,836,299,835,294,982,248"/>
<area shape="poly" title=" " alt="" coords="1038,248,1098,289,1096,293,1035,253"/>
<area shape="poly" title=" " alt="" coords="942,252,507,307,507,302,941,247"/>
<area shape="poly" title=" " alt="" coords="1024,251,1029,285,1023,286,1019,251"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLoRaWAN_1_1Impl.html">LoRaWAN::Impl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af6551f0b4c3964c3128f808e7bf987c7" id="r_af6551f0b4c3964c3128f808e7bf987c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#af6551f0b4c3964c3128f808e7bf987c7">DEBUG_PRINT</a>(x)&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x; } } while(0)</td></tr>
<tr class="separator:af6551f0b4c3964c3128f808e7bf987c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e30ff0704664fcb13dabf0c4dc5c8f5" id="r_a8e30ff0704664fcb13dabf0c4dc5c8f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#a8e30ff0704664fcb13dabf0c4dc5c8f5">DEBUG_PRINTLN</a>(x)&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x &lt;&lt; std::endl; } } while(0)</td></tr>
<tr class="separator:a8e30ff0704664fcb13dabf0c4dc5c8f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ab4af96b93912a46b8c1423738ab24" id="r_af4ab4af96b93912a46b8c1423738ab24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#af4ab4af96b93912a46b8c1423738ab24">DEBUG_HEX</a>(x)&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; std::hex &lt;&lt; (x) &lt;&lt; std::dec; } } while(0)</td></tr>
<tr class="separator:af4ab4af96b93912a46b8c1423738ab24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> protocol for communication with <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> networks. </p>
<p>This file contains the implementation of the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> class, which provides methods for initializing the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> stack, joining a network, sending and receiving messages, and handling various <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> protocol features such as ADR (Adaptive Data Rate) and MAC commands.</p>
<p>The implementation uses the <a class="el" href="classRFM95.html" title="Class for handling RFM95 LoRa module.">RFM95</a> radio module and supports both <a class="el" href="classCH341SPI.html" title="A class to interface with the CH341 USB to SPI adapter.">CH341SPI</a> and Linux SPI interfaces.</p>
<dl class="section note"><dt>Note</dt><dd>This implementation is designed for use with the <a class="el" href="classRFM95.html" title="Class for handling RFM95 LoRa module.">RFM95</a> radio module and may require modifications to work with other radio modules.</dd></dl>
<p>@dependencies</p><ul>
<li>OpenSSL (for AES encryption)</li>
<li>Standard C++ libraries (iostream, thread, chrono, queue, mutex, array, deque, bitset)</li>
<li>Project-specific headers (<a class="el" href="LoRaWAN_8hpp.html" title="Class declaration for LoRaWAN protocol communication.">LoRaWAN.hpp</a>, <a class="el" href="RFM95_8hpp.html" title="Header file for RFM95 LoRa Module Handler.">RFM95.hpp</a>, <a class="el" href="AES-CMAC_8hpp.html">AES-CMAC.hpp</a>, <a class="el" href="SessionManager_8hpp.html">SessionManager.hpp</a>)</li>
</ul>
<h1><a class="anchor" id="Usage"></a>
Usage</h1>
<p>To use this implementation, create an instance of the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> class and call its methods to initialize the radio, join a network, and send/receive messages. The class provides methods for setting device parameters (DevEUI, AppEUI, AppKey, etc.), configuring the radio, and handling protocol-specific tasks such as calculating MICs and processing MAC commands.</p>
<p>Example: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classLoRaWAN.html">LoRaWAN</a> lorawan;</div>
<div class="line">lorawan.<a class="code hl_function" href="classLoRaWAN.html#adffd9c0a1473856ad47d7f907c09c4b8">setDevEUI</a>(<span class="stringliteral">&quot;0004A30B001C0530&quot;</span>);</div>
<div class="line">lorawan.<a class="code hl_function" href="classLoRaWAN.html#a57704848e5467e16dd0c41bbfa2d2a93">setAppEUI</a>(<span class="stringliteral">&quot;70B3D57ED00201A6&quot;</span>);</div>
<div class="line">lorawan.<a class="code hl_function" href="classLoRaWAN.html#adb50791a437edc96f990690c0c3b409d">setAppKey</a>(<span class="stringliteral">&quot;8D7F3B4C5A6B7C8D9E0F1A2B3C4D5E6F&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (lorawan.<a class="code hl_function" href="classLoRaWAN.html#a8c73745337aa973a55723faf2a500bde">join</a>(<a class="code hl_enumvalue" href="classLoRaWAN.html#a1b47aaa4d3bdabb82bb1ecabeca62c39a8a192ff56960196a0212768287137944">LoRaWAN::JoinMode::OTAA</a>)) {</div>
<div class="line">    std::vector&lt;uint8_t&gt; data = {0x01, 0x02, 0x03};</div>
<div class="line">    lorawan.<a class="code hl_function" href="classLoRaWAN.html#a8da108200713d46435d07666c3aae69a">send</a>(data, 1, <span class="keyword">false</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclassLoRaWAN_html"><div class="ttname"><a href="classLoRaWAN.html">LoRaWAN</a></div><div class="ttdoc">Class that provides LoRaWAN protocol implementation.</div><div class="ttdef"><b>Definition</b> LoRaWAN.hpp:74</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a1b47aaa4d3bdabb82bb1ecabeca62c39a8a192ff56960196a0212768287137944"><div class="ttname"><a href="classLoRaWAN.html#a1b47aaa4d3bdabb82bb1ecabeca62c39a8a192ff56960196a0212768287137944">LoRaWAN::OTAA</a></div><div class="ttdeci">@ OTAA</div><div class="ttdoc">Over-The-Air Activation - dynamic session keys.</div><div class="ttdef"><b>Definition</b> LoRaWAN.hpp:100</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a57704848e5467e16dd0c41bbfa2d2a93"><div class="ttname"><a href="classLoRaWAN.html#a57704848e5467e16dd0c41bbfa2d2a93">LoRaWAN::setAppEUI</a></div><div class="ttdeci">void setAppEUI(const std::string &amp;appEUI)</div><div class="ttdoc">Set the Application EUI.</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:709</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a8c73745337aa973a55723faf2a500bde"><div class="ttname"><a href="classLoRaWAN.html#a8c73745337aa973a55723faf2a500bde">LoRaWAN::join</a></div><div class="ttdeci">bool join(JoinMode mode, unsigned long timeout=10000)</div><div class="ttdoc">Join a LoRaWAN network.</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:761</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a8da108200713d46435d07666c3aae69a"><div class="ttname"><a href="classLoRaWAN.html#a8da108200713d46435d07666c3aae69a">LoRaWAN::send</a></div><div class="ttdeci">bool send(const std::vector&lt; uint8_t &gt; &amp;data, uint8_t port, bool confirmed=false, bool force_duty_cycle=false)</div><div class="ttdoc">Send a message.</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:1196</div></div>
<div class="ttc" id="aclassLoRaWAN_html_adb50791a437edc96f990690c0c3b409d"><div class="ttname"><a href="classLoRaWAN.html#adb50791a437edc96f990690c0c3b409d">LoRaWAN::setAppKey</a></div><div class="ttdeci">void setAppKey(const std::string &amp;appKey)</div><div class="ttdoc">Set the Application Key.</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:729</div></div>
<div class="ttc" id="aclassLoRaWAN_html_adffd9c0a1473856ad47d7f907c09c4b8"><div class="ttname"><a href="classLoRaWAN.html#adffd9c0a1473856ad47d7f907c09c4b8">LoRaWAN::setDevEUI</a></div><div class="ttdeci">void setDevEUI(const std::string &amp;devEUI)</div><div class="ttdoc">Set the Device EUI.</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:689</div></div>
</div><!-- fragment --><h1><a class="anchor" id="Classes"></a>
Classes</h1>
<ul>
<li><a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a>: Main class for <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> protocol handling.</li>
<li><a class="el" href="structLoRaWAN_1_1Impl.html">LoRaWAN::Impl</a>: Internal implementation details for the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> class.</li>
</ul>
<h1><a class="anchor" id="Methods"></a>
Methods</h1>
<ul>
<li><a class="el" href="classLoRaWAN.html#aeaed75f0a4ac2b816e72301fb1c1d7f2" title="Default constructor.">LoRaWAN::LoRaWAN()</a>: Constructor to initialize the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> instance.</li>
<li><a class="el" href="classLoRaWAN.html#af13cdffa317e109091c2384924e46881" title="Destructor.">LoRaWAN::~LoRaWAN()</a>: Destructor to clean up resources.</li>
<li>bool <a class="el" href="classLoRaWAN.html#ad593b34eade402d9c15f97ad24f357f0" title="Initialize the LoRaWAN stack and radio.">LoRaWAN::init(int deviceIndex)</a>: Initialize the radio module.</li>
<li>void LoRaWAN::setDeviceClass(DeviceClass deviceClass): Set the device class (A, B, or C).</li>
<li>void <a class="el" href="classLoRaWAN.html#adffd9c0a1473856ad47d7f907c09c4b8" title="Set the Device EUI.">LoRaWAN::setDevEUI(const std::string&amp; devEUI)</a>: Set the device EUI.</li>
<li>void <a class="el" href="classLoRaWAN.html#a57704848e5467e16dd0c41bbfa2d2a93" title="Set the Application EUI.">LoRaWAN::setAppEUI(const std::string&amp; appEUI)</a>: Set the application EUI.</li>
<li>void <a class="el" href="classLoRaWAN.html#adb50791a437edc96f990690c0c3b409d" title="Set the Application Key.">LoRaWAN::setAppKey(const std::string&amp; appKey)</a>: Set the application key.</li>
<li>void <a class="el" href="classLoRaWAN.html#a5d6f8ba2009aeb37b699dd690a8fd219" title="Set the Device Address.">LoRaWAN::setDevAddr(const std::string&amp; devAddr)</a>: Set the device address.</li>
<li>void <a class="el" href="classLoRaWAN.html#aff7edab519f88288594e28202182b784" title="Set the Network Session Key.">LoRaWAN::setNwkSKey(const std::string&amp; nwkSKey)</a>: Set the network session key.</li>
<li>void <a class="el" href="classLoRaWAN.html#a2179f0eb06c729652f8063418635e960" title="Set the Application Session Key.">LoRaWAN::setAppSKey(const std::string&amp; appSKey)</a>: Set the application session key.</li>
<li>bool LoRaWAN::join(JoinMode mode, unsigned long timeout): Join a <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> network.</li>
<li>std::vector&lt;uint8_t&gt; <a class="el" href="classLoRaWAN.html#a91e611990a5fe95eb78d9145cac09e8b" title="Encrypt a payload.">LoRaWAN::encryptPayload(const std::vector&lt;uint8_t&gt;&amp; payload, uint8_t port)</a>: Encrypt the payload.</li>
<li>std::vector&lt;uint8_t&gt; <a class="el" href="classLoRaWAN.html#abaa99bf3e095accca52f87127a6f84c3" title="Decrypt a payload.">LoRaWAN::decryptPayload(const std::vector&lt;uint8_t&gt;&amp; payload, uint8_t port)</a>: Decrypt the payload.</li>
<li>float <a class="el" href="classLoRaWAN.html#afa737e87fce3b27f7454e16114e51443" title="Calculate the time on air for a payload.">LoRaWAN::calculateTimeOnAir(size_t payload_size)</a>: Calculate the time on air for a given payload size.</li>
<li>bool <a class="el" href="classLoRaWAN.html#afd7f7596f542e549bf25fcb45ed590b0" title="Check if duty cycle allows transmission.">LoRaWAN::checkDutyCycle(float frequency, size_t payload_size)</a>: Check if the duty cycle allows transmission.</li>
<li>float <a class="el" href="classLoRaWAN.html#a66c307e19c7be19c672fe50491eada53" title="Get the duty cycle usage for a channel.">LoRaWAN::getDutyCycleUsage(int channel)</a>: Get the duty cycle usage for a specific channel.</li>
<li>void <a class="el" href="classLoRaWAN.html#a8ccba1405131b1f820786655b91d0014" title="Reset the duty cycle usage.">LoRaWAN::resetDutyCycle()</a>: Reset the duty cycle usage.</li>
<li>bool <a class="el" href="classLoRaWAN.html#a8da108200713d46435d07666c3aae69a" title="Send a message.">LoRaWAN::send(const std::vector&lt;uint8_t&gt;&amp; data, uint8_t port, bool confirmed, bool force_duty_cycle)</a>: Send a message.</li>
<li>void <a class="el" href="classLoRaWAN.html#a7d9b2dcd0f04847a0cdb28842da17664" title="Update the LoRaWAN state.">LoRaWAN::update()</a>: Update the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> state and handle received messages.</li>
<li>bool LoRaWAN::receive(Message&amp; message, unsigned long timeout): Receive a message.</li>
<li>void LoRaWAN::onReceive(std::function&lt;void(const Message&amp;)&gt; callback): Set a callback for received messages.</li>
<li>void <a class="el" href="classLoRaWAN.html#a0b5789c4e144944ec146f8a94d0617f0" title="Set a callback for join events.">LoRaWAN::onJoin(std::function&lt;void(bool)&gt; callback)</a>: Set a callback for join events.</li>
<li>void <a class="el" href="classLoRaWAN.html#aade793b29f1c495b9d262203fca58b77" title="Set the LoRaWAN region.">LoRaWAN::setRegion(int region)</a>: Set the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> region.</li>
<li>int <a class="el" href="classLoRaWAN.html#a4162ee9bab7fb987926d2ef45c3b29a0" title="Get the current LoRaWAN region.">LoRaWAN::getRegion() const</a>: Get the current <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> region.</li>
<li>float <a class="el" href="classLoRaWAN.html#a347ca9920d817407fe43236f534afaad" title="Get the current frequency.">LoRaWAN::getFrequency() const</a>: Get the current frequency.</li>
<li>void <a class="el" href="classLoRaWAN.html#aef8223d38e0bbb7dbec95c717e692d19" title="Set the frequency.">LoRaWAN::setFrequency(float freq_mhz)</a>: Set the frequency.</li>
<li>int <a class="el" href="classLoRaWAN.html#a90be4d7a0a1e77206ff7762ff2bb5191" title="Get the channel from a frequency.">LoRaWAN::getChannelFromFrequency(float freq_mhz) const</a>: Get the channel index from a frequency.</li>
<li>float <a class="el" href="classLoRaWAN.html#a5de02f252230bb9bef044304f20946f5" title="Get the frequency for a channel.">LoRaWAN::getFrequencyFromChannel(int channel) const</a>: Get the frequency from a channel index.</li>
<li>void <a class="el" href="classLoRaWAN.html#a6835f2899f8a47951dec46cba1a4d45f" title="Set the current channel.">LoRaWAN::setChannel(uint8_t channel)</a>: Set the current channel.</li>
<li>uint8_t <a class="el" href="classLoRaWAN.html#a474dce0a1ab247c7e46938e8234f0f73" title="Get the current channel.">LoRaWAN::getChannel() const</a>: Get the current channel.</li>
<li>void <a class="el" href="classLoRaWAN.html#abd2edab367fdd00cf914492768491abf" title="Enable or disable single channel mode.">LoRaWAN::setSingleChannel(bool enable, float freq_mhz, int sf, int bw, int cr, int power, int preamble)</a>: Enable or disable single channel mode.</li>
<li>bool <a class="el" href="classLoRaWAN.html#ae109afea6c71526c9d09a5f207709e71" title="Check if single channel mode is enabled.">LoRaWAN::getSingleChannel() const</a>: Check if single channel mode is enabled.</li>
<li>float <a class="el" href="classLoRaWAN.html#a9760aefccbcb32b2c3b1d8f7100aa423" title="Get the single channel frequency.">LoRaWAN::getSingleChannelFrequency() const</a>: Get the frequency for single channel mode.</li>
<li>void <a class="el" href="classLoRaWAN.html#ab1834f8e6ae664fb8ccc656599eee012" title="Set the transmission power.">LoRaWAN::setTxPower(int8_t power)</a>: Set the transmission power.</li>
<li>int <a class="el" href="classLoRaWAN.html#a07b3cc156a6db9755909d4eaa89b2ba5" title="Get the RSSI (Received Signal Strength Indicator).">LoRaWAN::getRSSI() const</a>: Get the RSSI (Received Signal Strength Indicator).</li>
<li>int <a class="el" href="classLoRaWAN.html#a3118aa09d5a8b9efc8396a261d169779" title="Get the SNR (Signal-to-Noise Ratio).">LoRaWAN::getSNR() const</a>: Get the SNR (Signal-to-Noise Ratio).</li>
<li>uint32_t <a class="el" href="classLoRaWAN.html#a65f69b3b6bb9aafca04078bd123e9d68" title="Get the frame counter.">LoRaWAN::getFrameCounter() const</a>: Get the frame counter.</li>
<li>void <a class="el" href="classLoRaWAN.html#a7d38a71e23498fb5f04e1a65d8122362" title="Set the frame counter.">LoRaWAN::setFrameCounter(uint32_t counter)</a>: Set the frame counter.</li>
<li>void <a class="el" href="classLoRaWAN.html#ac9082f459903f4e585977c7f43f1ded2" title="Wake the radio from sleep mode.">LoRaWAN::wake()</a>: Wake up the radio module.</li>
<li>void <a class="el" href="classLoRaWAN.html#a246a7f31dad83cec9e647514264a4137" title="Put the radio in sleep mode.">LoRaWAN::sleep()</a>: Put the radio module to sleep.</li>
<li>bool <a class="el" href="classLoRaWAN.html#a98daefba444f0e35efeb07ab184e103b" title="Validate the session keys.">LoRaWAN::validateKeys() const</a>: Validate the session keys.</li>
<li>void <a class="el" href="classLoRaWAN.html#a482cba0e8ce16f5ff473eba085d0e8d3" title="Enable or disable ADR (Adaptive Data Rate).">LoRaWAN::enableADR(bool enable)</a>: Enable or disable ADR (Adaptive Data Rate).</li>
<li>bool <a class="el" href="classLoRaWAN.html#a1d238515892563864cde31056f01133e" title="Check if ADR is enabled.">LoRaWAN::isADREnabled() const</a>: Check if ADR is enabled.</li>
<li>void <a class="el" href="classLoRaWAN.html#a2660625aa37e6dced0aec051ea9a6b3f" title="Reset the LoRaWAN session.">LoRaWAN::resetSession()</a>: Reset the <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> session.</li>
<li>void <a class="el" href="classLoRaWAN.html#a16d697abda09f7c432712bba2cf9c9bf" title="Apply ADR settings.">LoRaWAN::applyADRSettings(uint8_t dataRate, uint8_t txPower, const std::vector&lt;uint8_t&gt;&amp; channelMask)</a>: Apply ADR settings.</li>
<li>void <a class="el" href="classLoRaWAN.html#ad3dc8eb3103944d74478caaa3735d7d1" title="Process MAC commands.">LoRaWAN::processMACCommands(const std::vector&lt;uint8_t&gt;&amp; commands, std::vector&lt;uint8_t&gt;&amp; response)</a>: Process MAC commands.</li>
<li>void <a class="el" href="classLoRaWAN.html#aada1c8d8275c7c1a39dc9f4fda288a72" title="Process LinkADRReq MAC command.">LoRaWAN::processLinkADRReq(const std::vector&lt;uint8_t&gt;&amp; cmd, size_t index, std::vector&lt;uint8_t&gt;&amp; response)</a>: Process LinkADRReq command.</li>
</ul>
<h1><a class="anchor" id="Debugging"></a>
Debugging</h1>
<p>The implementation includes several debug macros for conditional printing:</p><ul>
<li><a class="el" href="LoRaWAN_8cpp.html#af6551f0b4c3964c3128f808e7bf987c7">DEBUG_PRINT(x)</a>: Print a message if verbose mode is enabled.</li>
<li><a class="el" href="LoRaWAN_8cpp.html#a8e30ff0704664fcb13dabf0c4dc5c8f5">DEBUG_PRINTLN(x)</a>: Print a message with a newline if verbose mode is enabled.</li>
<li><a class="el" href="LoRaWAN_8cpp.html#af4ab4af96b93912a46b8c1423738ab24">DEBUG_HEX(x)</a>: Print a value in hexadecimal format if verbose mode is enabled.</li>
</ul>
<h1><a class="anchor" id="Internal"></a>
Structures</h1>
<ul>
<li>struct <a class="el" href="structLoRaWAN_1_1Impl.html">LoRaWAN::Impl</a>: Internal implementation details, including radio configuration, session keys, counters, and state management.</li>
</ul>
<h1><a class="anchor" id="Constants"></a>
Constants</h1>
<ul>
<li>BASE_FREQ: Base frequencies for different regions.</li>
<li>CHANNEL_STEP: Channel step sizes for different regions.</li>
<li>MAX_POWER: Maximum transmission power for different regions.</li>
<li>RX2_FREQ: RX2 frequencies for different regions.</li>
<li>RX2_SF: RX2 spreading factors for different regions.</li>
<li>RX2_BW: RX2 bandwidths for different regions.</li>
<li>RX2_CR: RX2 coding rates for different regions.</li>
<li>RX2_PREAMBLE: RX2 preamble lengths for different regions.</li>
<li>ADR_ACK_LIMIT: ADR acknowledgment limit.</li>
<li>ADR_ACK_DELAY: ADR acknowledgment delay.</li>
<li>MAX_CHANNELS: Maximum number of channels.</li>
<li>REGIONS: Number of supported regions.</li>
</ul>
<h1><a class="anchor" id="Enums"></a>
Enums</h1>
<ul>
<li>enum DeviceClass: Device classes (A, B, C).</li>
<li>enum JoinMode: Join modes (OTAA, ABP).</li>
<li>enum ConfirmationState: Confirmation states (NONE, WAITING_ACK, ACK_PENDING).</li>
<li>enum RxWindowState: RX window states (RX_IDLE, RX_WINDOW_1, RX_WINDOW_2, RX_CONTINUOUS).</li>
</ul>
<h1><a class="anchor" id="Typedefs"></a>
Typedefs</h1>
<ul>
<li>typedef std::function&lt;void(const Message&amp;)&gt; ReceiveCallback: Callback type for received messages.</li>
<li>typedef std::function&lt;void(bool)&gt; JoinCallback: Callback type for join events.</li>
</ul>
<h1><a class="anchor" id="Structs"></a>
Structs</h1>
<ul>
<li>struct Message: Structure representing a <a class="el" href="classLoRaWAN.html" title="Class that provides LoRaWAN protocol implementation.">LoRaWAN</a> message.</li>
</ul>
<h1><a class="anchor" id="Authors"></a>
Authors</h1>
<ul>
<li>Sergio PÃ©rez (Original Author)</li>
</ul>
<dl class="section date"><dt>Date</dt><dd>2025/03/08</dd></dl>
<h1><a class="anchor" id="License"></a>
License</h1>
<p>This code is provided under the MIT License. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af4ab4af96b93912a46b8c1423738ab24" name="af4ab4af96b93912a46b8c1423738ab24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ab4af96b93912a46b8c1423738ab24">&#9670;&#160;</a></span>DEBUG_HEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_HEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; std::hex &lt;&lt; (x) &lt;&lt; std::dec; } } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af6551f0b4c3964c3128f808e7bf987c7" name="af6551f0b4c3964c3128f808e7bf987c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6551f0b4c3964c3128f808e7bf987c7">&#9670;&#160;</a></span>DEBUG_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_PRINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x; } } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8e30ff0704664fcb13dabf0c4dc5c8f5" name="a8e30ff0704664fcb13dabf0c4dc5c8f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e30ff0704664fcb13dabf0c4dc5c8f5">&#9670;&#160;</a></span>DEBUG_PRINTLN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_PRINTLN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x &lt;&lt; std::endl; } } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
