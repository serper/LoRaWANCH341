<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoRaWANCH341 Library: src/LoRaWAN.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LoRaWANCH341 Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">LoRaWAN.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> protocol for communication with <a class="el" href="classLoRaWAN.html">LoRaWAN</a> networks.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;openssl/evp.h&gt;</code><br />
<code>#include &lt;iomanip&gt;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &quot;<a class="el" href="LoRaWAN_8hpp_source.html">LoRaWAN.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="RFM95_8hpp_source.html">RFM95.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="AES-CMAC_8hpp_source.html">AES-CMAC.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="SessionManager_8hpp_source.html">SessionManager.hpp</a>&quot;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;queue&gt;</code><br />
<code>#include &lt;mutex&gt;</code><br />
<code>#include &lt;array&gt;</code><br />
<code>#include &lt;deque&gt;</code><br />
<code>#include &lt;bitset&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for LoRaWAN.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="LoRaWAN_8cpp__incl.png" border="0" usemap="#asrc_2LoRaWAN_8cpp" alt=""/></div>
<map name="asrc_2LoRaWAN_8cpp" id="asrc_2LoRaWAN_8cpp">
<area shape="rect" title="Implementation of the LoRaWAN protocol for communication with LoRaWAN networks." alt="" coords="861,5,995,31"/>
<area shape="rect" title=" " alt="" coords="5,79,117,104"/>
<area shape="poly" title=" " alt="" coords="861,25,550,43,344,59,132,81,131,76,343,54,549,38,860,20"/>
<area shape="rect" title=" " alt="" coords="141,79,216,104"/>
<area shape="poly" title=" " alt="" coords="861,25,589,41,412,58,230,81,229,76,412,52,588,36,860,19"/>
<area shape="rect" title=" " alt="" coords="240,79,325,104"/>
<area shape="poly" title=" " alt="" coords="861,26,633,46,489,61,339,81,339,76,488,56,633,40,860,21"/>
<area shape="rect" title=" " alt="" coords="350,79,413,104"/>
<area shape="poly" title=" " alt="" coords="861,28,668,48,432,81,427,82,426,77,432,76,667,43,860,23"/>
<area shape="rect" href="LoRaWAN_8hpp.html" title=" " alt="" coords="377,152,490,177"/>
<area shape="poly" title=" " alt="" coords="861,21,791,24,707,33,619,51,535,81,489,110,454,144,450,140,486,106,532,76,618,46,706,28,790,19,861,16"/>
<area shape="rect" title=" " alt="" coords="1485,299,1541,324"/>
<area shape="poly" title=" " alt="" coords="987,28,1119,58,1282,102,1360,129,1430,158,1486,190,1507,207,1522,224,1529,239,1531,255,1526,286,1520,285,1526,255,1524,240,1518,227,1503,211,1483,194,1428,163,1358,134,1280,107,1118,63,986,33"/>
<area shape="rect" title=" " alt="" coords="448,225,515,251"/>
<area shape="poly" title=" " alt="" coords="861,32,781,51,738,64,697,81,667,98,646,114,598,154,510,219,506,215,594,150,642,110,664,93,695,76,736,59,779,46,860,27"/>
<area shape="rect" title=" " alt="" coords="107,225,170,251"/>
<area shape="poly" title=" " alt="" coords="861,25,691,41,590,58,490,81,353,140,177,222,174,217,350,135,488,76,589,53,690,36,860,20"/>
<area shape="rect" href="RFM95_8hpp.html" title="Header file for RFM95 LoRa Module Handler." alt="" coords="707,79,802,104"/>
<area shape="poly" title=" " alt="" coords="901,33,797,76,795,71,899,28"/>
<area shape="rect" title=" " alt="" coords="1093,225,1157,251"/>
<area shape="poly" title=" " alt="" coords="945,29,1005,79,1041,113,1075,150,1098,182,1115,212,1111,214,1093,184,1071,154,1038,117,1001,83,942,33"/>
<area shape="rect" href="AES-CMAC_8hpp.html" title=" " alt="" coords="1362,225,1481,251"/>
<area shape="poly" title=" " alt="" coords="956,28,1069,76,1385,217,1383,222,1067,81,954,33"/>
<area shape="rect" href="SessionManager_8hpp.html" title=" " alt="" coords="1182,225,1338,251"/>
<area shape="poly" title=" " alt="" coords="951,29,1033,76,1146,152,1235,215,1232,219,1143,156,1031,81,948,33"/>
<area shape="rect" title=" " alt="" coords="1303,79,1383,104"/>
<area shape="poly" title=" " alt="" coords="996,27,1284,76,1290,77,1289,82,1284,81,995,33"/>
<area shape="rect" title=" " alt="" coords="1407,79,1470,104"/>
<area shape="poly" title=" " alt="" coords="996,23,1172,42,1394,76,1393,81,1171,47,995,28"/>
<area shape="rect" title=" " alt="" coords="1495,79,1559,104"/>
<area shape="poly" title=" " alt="" coords="996,21,1208,39,1343,55,1481,76,1481,81,1342,60,1208,44,995,26"/>
<area shape="rect" title=" " alt="" coords="1583,79,1641,104"/>
<area shape="poly" title=" " alt="" coords="996,19,1245,35,1405,52,1569,76,1568,81,1404,57,1244,40,995,24"/>
<area shape="rect" title=" " alt="" coords="656,299,715,324"/>
<area shape="poly" title=" " alt="" coords="422,179,408,195,395,213,389,232,390,241,394,249,410,262,435,272,501,289,576,299,642,305,642,310,576,305,500,294,433,277,407,266,390,252,385,242,383,232,390,211,403,191,418,176"/>
<area shape="rect" title=" " alt="" coords="442,299,529,324"/>
<area shape="poly" title=" " alt="" coords="405,180,378,193,354,210,340,229,339,239,344,249,361,268,382,282,430,300,428,305,379,287,357,272,339,252,334,240,335,227,350,206,375,188,402,175"/>
<area shape="rect" title=" " alt="" coords="739,299,805,324"/>
<area shape="poly" title=" " alt="" coords="432,178,427,213,429,232,438,249,458,263,487,274,565,285,651,290,725,296,725,302,651,295,565,290,486,279,456,268,434,252,424,234,422,213,427,177"/>
<area shape="rect" title=" " alt="" coords="901,299,963,324"/>
<area shape="poly" title=" " alt="" coords="486,175,679,223,793,258,889,292,887,297,792,263,678,228,485,180"/>
<area shape="rect" title=" " alt="" coords="220,299,297,324"/>
<area shape="poly" title=" " alt="" coords="410,180,373,200,334,227,302,258,277,289,273,286,298,255,330,223,370,196,408,175"/>
<area shape="poly" title=" " alt="" coords="490,165,1058,183,1351,201,1448,211,1479,217,1495,223,1506,236,1513,252,1517,284,1512,285,1508,254,1502,239,1492,227,1477,222,1448,216,1350,206,1058,189,490,170"/>
<area shape="poly" title=" " alt="" coords="443,176,468,213,464,216,439,179"/>
<area shape="rect" href="SPIInterface_8hpp.html" title=" " alt="" coords="539,225,667,251"/>
<area shape="poly" title=" " alt="" coords="462,175,563,217,561,222,460,180"/>
<area shape="poly" title=" " alt="" coords="387,180,184,229,182,223,385,175"/>
<area shape="poly" title=" " alt="" coords="618,249,663,287,660,292,614,253"/>
<area shape="poly" title=" " alt="" coords="585,253,518,294,515,289,582,248"/>
<area shape="poly" title=" " alt="" coords="631,248,733,291,731,296,629,253"/>
<area shape="poly" title=" " alt="" coords="656,248,888,298,887,303,655,253"/>
<area shape="poly" title=" " alt="" coords="548,253,312,302,311,297,547,248"/>
<area shape="poly" title=" " alt="" coords="753,105,696,286,691,284,748,104"/>
<area shape="poly" title=" " alt="" coords="758,104,773,284,767,285,753,105"/>
<area shape="poly" title=" " alt="" coords="766,103,916,286,912,289,762,106"/>
<area shape="poly" title=" " alt="" coords="707,98,524,117,430,133,393,143,365,154,330,182,303,218,283,255,269,287,264,285,278,253,299,215,327,178,363,150,391,138,429,128,523,111,707,93"/>
<area shape="poly" title=" " alt="" coords="734,107,516,221,514,217,732,102"/>
<area shape="poly" title=" " alt="" coords="742,106,687,154,625,217,621,213,684,150,739,102"/>
<area shape="rect" href="CH341SPI_8hpp.html" title="Header file for the CH341SPI class, which implements the SPIInterface for the CH341 USB to SPI adapte..." alt="" coords="911,152,1025,177"/>
<area shape="poly" title=" " alt="" coords="790,101,921,145,920,150,788,107"/>
<area shape="poly" title=" " alt="" coords="803,92,853,97,914,107,978,124,1039,150,1079,180,1110,213,1106,216,1076,184,1036,154,976,129,913,112,853,102,802,97"/>
<area shape="poly" title=" " alt="" coords="947,180,721,295,718,290,944,175"/>
<area shape="poly" title=" " alt="" coords="968,178,941,286,936,285,962,177"/>
<area shape="poly" title=" " alt="" coords="912,180,675,225,674,220,911,174"/>
<area shape="rect" title=" " alt="" coords="995,225,1069,251"/>
<area shape="poly" title=" " alt="" coords="981,176,1015,213,1011,217,977,179"/>
<area shape="poly" title=" " alt="" coords="994,175,1088,217,1086,222,992,180"/>
<area shape="poly" title=" " alt="" coords="1362,252,1351,253,819,308,819,303,1350,248,1362,246"/>
<area shape="poly" title=" " alt="" coords="1362,252,1351,253,977,307,976,301,1350,248,1362,246"/>
<area shape="poly" title=" " alt="" coords="1438,249,1489,288,1486,292,1434,253"/>
<area shape="rect" title=" " alt="" coords="1386,299,1457,324"/>
<area shape="poly" title=" " alt="" coords="1424,251,1424,285,1419,285,1419,251"/>
<area shape="poly" title=" " alt="" coords="1182,252,1170,253,1047,265,950,272,853,282,729,301,728,296,852,276,950,267,1047,260,1169,248,1182,247"/>
<area shape="poly" title=" " alt="" coords="1182,253,820,306,819,301,1181,248"/>
<area shape="poly" title=" " alt="" coords="1208,253,977,303,976,298,1207,248"/>
<area shape="poly" title=" " alt="" coords="1301,248,1473,296,1471,301,1300,253"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structLoRaWAN_1_1Impl.html">LoRaWAN::Impl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af6551f0b4c3964c3128f808e7bf987c7" id="r_af6551f0b4c3964c3128f808e7bf987c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#af6551f0b4c3964c3128f808e7bf987c7">DEBUG_PRINT</a>(x)&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x; } } while(0)</td></tr>
<tr class="separator:af6551f0b4c3964c3128f808e7bf987c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e30ff0704664fcb13dabf0c4dc5c8f5" id="r_a8e30ff0704664fcb13dabf0c4dc5c8f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#a8e30ff0704664fcb13dabf0c4dc5c8f5">DEBUG_PRINTLN</a>(x)&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x &lt;&lt; std::endl; } } while(0)</td></tr>
<tr class="separator:a8e30ff0704664fcb13dabf0c4dc5c8f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ab4af96b93912a46b8c1423738ab24" id="r_af4ab4af96b93912a46b8c1423738ab24"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#af4ab4af96b93912a46b8c1423738ab24">DEBUG_HEX</a>(x)&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; std::hex &lt;&lt; (x) &lt;&lt; std::dec; } } while(0)</td></tr>
<tr class="separator:af4ab4af96b93912a46b8c1423738ab24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab0921be6ee4c38f0aac79de996405813" id="r_ab0921be6ee4c38f0aac79de996405813"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#ab0921be6ee4c38f0aac79de996405813">ch341_spi</a> = <a class="el" href="classSPIFactory.html#a135a7cbc8771df59615672d0e1b097b4">SPIFactory::createCH341SPI</a>(0, true)</td></tr>
<tr class="separator:ab0921be6ee4c38f0aac79de996405813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10a127988aa4069013339d296ba1d750" id="r_a10a127988aa4069013339d296ba1d750"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoRaWAN_8cpp.html#a10a127988aa4069013339d296ba1d750">rfm</a> = <a class="el" href="classRFM95.html">RFM95</a>(std::move(<a class="el" href="LoRaWAN_8cpp.html#ab0921be6ee4c38f0aac79de996405813">ch341_spi</a>))</td></tr>
<tr class="separator:a10a127988aa4069013339d296ba1d750"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> protocol for communication with <a class="el" href="classLoRaWAN.html">LoRaWAN</a> networks. </p>
<p>This file contains the implementation of the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> class, which provides methods for initializing the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> stack, joining a network, sending and receiving messages, and handling various <a class="el" href="classLoRaWAN.html">LoRaWAN</a> protocol features such as ADR (Adaptive Data Rate) and MAC commands.</p>
<p>The implementation uses the <a class="el" href="classRFM95.html" title="Class for handling RFM95 LoRa module.">RFM95</a> radio module and supports both <a class="el" href="classCH341SPI.html" title="A class to interface with the CH341 USB to SPI adapter.">CH341SPI</a> and Linux SPI interfaces.</p>
<dl class="section note"><dt>Note</dt><dd>This implementation is designed for use with the <a class="el" href="classRFM95.html" title="Class for handling RFM95 LoRa module.">RFM95</a> radio module and may require modifications to work with other radio modules.</dd></dl>
<p>@dependencies</p><ul>
<li>OpenSSL (for AES encryption)</li>
<li>Standard C++ libraries (iostream, thread, chrono, queue, mutex, array, deque, bitset)</li>
<li>Project-specific headers (<a class="el" href="LoRaWAN_8hpp.html">LoRaWAN.hpp</a>, <a class="el" href="RFM95_8hpp.html" title="Header file for RFM95 LoRa Module Handler.">RFM95.hpp</a>, <a class="el" href="AES-CMAC_8hpp.html">AES-CMAC.hpp</a>, <a class="el" href="SessionManager_8hpp.html">SessionManager.hpp</a>)</li>
</ul>
<h1><a class="anchor" id="Usage"></a>
Usage</h1>
<p>To use this implementation, create an instance of the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> class and call its methods to initialize the radio, join a network, and send/receive messages. The class provides methods for setting device parameters (DevEUI, AppEUI, AppKey, etc.), configuring the radio, and handling protocol-specific tasks such as calculating MICs and processing MAC commands.</p>
<p>Example: </p><div class="fragment"><div class="line"><a class="code hl_class" href="classLoRaWAN.html">LoRaWAN</a> lorawan;</div>
<div class="line">lorawan.<a class="code hl_function" href="classLoRaWAN.html#adffd9c0a1473856ad47d7f907c09c4b8">setDevEUI</a>(<span class="stringliteral">&quot;0004A30B001C0530&quot;</span>);</div>
<div class="line">lorawan.<a class="code hl_function" href="classLoRaWAN.html#a57704848e5467e16dd0c41bbfa2d2a93">setAppEUI</a>(<span class="stringliteral">&quot;70B3D57ED00201A6&quot;</span>);</div>
<div class="line">lorawan.<a class="code hl_function" href="classLoRaWAN.html#adb50791a437edc96f990690c0c3b409d">setAppKey</a>(<span class="stringliteral">&quot;8D7F3B4C5A6B7C8D9E0F1A2B3C4D5E6F&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (lorawan.<a class="code hl_function" href="classLoRaWAN.html#a031ba58c88d31d4094c5d271582f0699">join</a>(<a class="code hl_enumvalue" href="classLoRaWAN.html#a1b47aaa4d3bdabb82bb1ecabeca62c39a88a9f8e9a4a65eb0459b0f641b0d76e5">LoRaWAN::JoinMode::OTAA</a>)) {</div>
<div class="line">    std::vector&lt;uint8_t&gt; data = {0x01, 0x02, 0x03};</div>
<div class="line">    lorawan.<a class="code hl_function" href="classLoRaWAN.html#a9033a02849fb520b17e9a51ec3b6680b">send</a>(data, 1, <span class="keyword">false</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclassLoRaWAN_html"><div class="ttname"><a href="classLoRaWAN.html">LoRaWAN</a></div><div class="ttdef"><b>Definition</b> LoRaWAN.hpp:14</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a031ba58c88d31d4094c5d271582f0699"><div class="ttname"><a href="classLoRaWAN.html#a031ba58c88d31d4094c5d271582f0699">LoRaWAN::join</a></div><div class="ttdeci">bool join(JoinMode mode=JoinMode::OTAA, unsigned long timeout=20000)</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:759</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a1b47aaa4d3bdabb82bb1ecabeca62c39a88a9f8e9a4a65eb0459b0f641b0d76e5"><div class="ttname"><a href="classLoRaWAN.html#a1b47aaa4d3bdabb82bb1ecabeca62c39a88a9f8e9a4a65eb0459b0f641b0d76e5">LoRaWAN::JoinMode::OTAA</a></div><div class="ttdeci">@ OTAA</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a57704848e5467e16dd0c41bbfa2d2a93"><div class="ttname"><a href="classLoRaWAN.html#a57704848e5467e16dd0c41bbfa2d2a93">LoRaWAN::setAppEUI</a></div><div class="ttdeci">void setAppEUI(const std::string &amp;appEUI)</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:707</div></div>
<div class="ttc" id="aclassLoRaWAN_html_a9033a02849fb520b17e9a51ec3b6680b"><div class="ttname"><a href="classLoRaWAN.html#a9033a02849fb520b17e9a51ec3b6680b">LoRaWAN::send</a></div><div class="ttdeci">bool send(const std::vector&lt; uint8_t &gt; &amp;data, uint8_t port=1, bool confirmed=false, bool force_duty_cycle=false)</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:1194</div></div>
<div class="ttc" id="aclassLoRaWAN_html_adb50791a437edc96f990690c0c3b409d"><div class="ttname"><a href="classLoRaWAN.html#adb50791a437edc96f990690c0c3b409d">LoRaWAN::setAppKey</a></div><div class="ttdeci">void setAppKey(const std::string &amp;appKey)</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:727</div></div>
<div class="ttc" id="aclassLoRaWAN_html_adffd9c0a1473856ad47d7f907c09c4b8"><div class="ttname"><a href="classLoRaWAN.html#adffd9c0a1473856ad47d7f907c09c4b8">LoRaWAN::setDevEUI</a></div><div class="ttdeci">void setDevEUI(const std::string &amp;devEUI)</div><div class="ttdef"><b>Definition</b> LoRaWAN.cpp:687</div></div>
</div><!-- fragment --><h1><a class="anchor" id="Classes"></a>
Classes</h1>
<ul>
<li><a class="el" href="classLoRaWAN.html">LoRaWAN</a>: Main class for <a class="el" href="classLoRaWAN.html">LoRaWAN</a> protocol handling.</li>
<li><a class="el" href="structLoRaWAN_1_1Impl.html">LoRaWAN::Impl</a>: Internal implementation details for the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> class.</li>
</ul>
<h1><a class="anchor" id="Methods"></a>
Methods</h1>
<ul>
<li><a class="el" href="classLoRaWAN.html#aeaed75f0a4ac2b816e72301fb1c1d7f2">LoRaWAN::LoRaWAN()</a>: Constructor to initialize the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> instance.</li>
<li><a class="el" href="classLoRaWAN.html#af13cdffa317e109091c2384924e46881">LoRaWAN::~LoRaWAN()</a>: Destructor to clean up resources.</li>
<li>bool <a class="el" href="classLoRaWAN.html#ad593b34eade402d9c15f97ad24f357f0">LoRaWAN::init(int deviceIndex)</a>: Initialize the radio module.</li>
<li>void LoRaWAN::setDeviceClass(DeviceClass deviceClass): Set the device class (A, B, or C).</li>
<li>void <a class="el" href="classLoRaWAN.html#adffd9c0a1473856ad47d7f907c09c4b8">LoRaWAN::setDevEUI(const std::string&amp; devEUI)</a>: Set the device EUI.</li>
<li>void <a class="el" href="classLoRaWAN.html#a57704848e5467e16dd0c41bbfa2d2a93">LoRaWAN::setAppEUI(const std::string&amp; appEUI)</a>: Set the application EUI.</li>
<li>void <a class="el" href="classLoRaWAN.html#adb50791a437edc96f990690c0c3b409d">LoRaWAN::setAppKey(const std::string&amp; appKey)</a>: Set the application key.</li>
<li>void <a class="el" href="classLoRaWAN.html#a5d6f8ba2009aeb37b699dd690a8fd219">LoRaWAN::setDevAddr(const std::string&amp; devAddr)</a>: Set the device address.</li>
<li>void <a class="el" href="classLoRaWAN.html#aff7edab519f88288594e28202182b784">LoRaWAN::setNwkSKey(const std::string&amp; nwkSKey)</a>: Set the network session key.</li>
<li>void <a class="el" href="classLoRaWAN.html#a2179f0eb06c729652f8063418635e960">LoRaWAN::setAppSKey(const std::string&amp; appSKey)</a>: Set the application session key.</li>
<li>bool LoRaWAN::join(JoinMode mode, unsigned long timeout): Join a <a class="el" href="classLoRaWAN.html">LoRaWAN</a> network.</li>
<li>std::vector&lt;uint8_t&gt; <a class="el" href="classLoRaWAN.html#a91e611990a5fe95eb78d9145cac09e8b">LoRaWAN::encryptPayload(const std::vector&lt;uint8_t&gt;&amp; payload, uint8_t port)</a>: Encrypt the payload.</li>
<li>std::vector&lt;uint8_t&gt; <a class="el" href="classLoRaWAN.html#abaa99bf3e095accca52f87127a6f84c3">LoRaWAN::decryptPayload(const std::vector&lt;uint8_t&gt;&amp; payload, uint8_t port)</a>: Decrypt the payload.</li>
<li>float <a class="el" href="classLoRaWAN.html#afa737e87fce3b27f7454e16114e51443">LoRaWAN::calculateTimeOnAir(size_t payload_size)</a>: Calculate the time on air for a given payload size.</li>
<li>bool <a class="el" href="classLoRaWAN.html#afd7f7596f542e549bf25fcb45ed590b0">LoRaWAN::checkDutyCycle(float frequency, size_t payload_size)</a>: Check if the duty cycle allows transmission.</li>
<li>float <a class="el" href="classLoRaWAN.html#a66c307e19c7be19c672fe50491eada53">LoRaWAN::getDutyCycleUsage(int channel)</a>: Get the duty cycle usage for a specific channel.</li>
<li>void <a class="el" href="classLoRaWAN.html#a8ccba1405131b1f820786655b91d0014">LoRaWAN::resetDutyCycle()</a>: Reset the duty cycle usage.</li>
<li>bool <a class="el" href="classLoRaWAN.html#a9033a02849fb520b17e9a51ec3b6680b">LoRaWAN::send(const std::vector&lt;uint8_t&gt;&amp; data, uint8_t port, bool confirmed, bool force_duty_cycle)</a>: Send a message.</li>
<li>void <a class="el" href="classLoRaWAN.html#a7d9b2dcd0f04847a0cdb28842da17664">LoRaWAN::update()</a>: Update the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> state and handle received messages.</li>
<li>bool LoRaWAN::receive(Message&amp; message, unsigned long timeout): Receive a message.</li>
<li>void LoRaWAN::onReceive(std::function&lt;void(const Message&amp;)&gt; callback): Set a callback for received messages.</li>
<li>void LoRaWAN::onJoin(std::function&lt;void(bool)&gt; callback): Set a callback for join events.</li>
<li>void <a class="el" href="classLoRaWAN.html#aade793b29f1c495b9d262203fca58b77">LoRaWAN::setRegion(int region)</a>: Set the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> region.</li>
<li>int <a class="el" href="classLoRaWAN.html#a4162ee9bab7fb987926d2ef45c3b29a0">LoRaWAN::getRegion() const</a>: Get the current <a class="el" href="classLoRaWAN.html">LoRaWAN</a> region.</li>
<li>float <a class="el" href="classLoRaWAN.html#a347ca9920d817407fe43236f534afaad">LoRaWAN::getFrequency() const</a>: Get the current frequency.</li>
<li>void <a class="el" href="classLoRaWAN.html#aef8223d38e0bbb7dbec95c717e692d19">LoRaWAN::setFrequency(float freq_mhz)</a>: Set the frequency.</li>
<li>int <a class="el" href="classLoRaWAN.html#a90be4d7a0a1e77206ff7762ff2bb5191">LoRaWAN::getChannelFromFrequency(float freq_mhz) const</a>: Get the channel index from a frequency.</li>
<li>float <a class="el" href="classLoRaWAN.html#a5de02f252230bb9bef044304f20946f5">LoRaWAN::getFrequencyFromChannel(int channel) const</a>: Get the frequency from a channel index.</li>
<li>void <a class="el" href="classLoRaWAN.html#a6835f2899f8a47951dec46cba1a4d45f">LoRaWAN::setChannel(uint8_t channel)</a>: Set the current channel.</li>
<li>uint8_t <a class="el" href="classLoRaWAN.html#a474dce0a1ab247c7e46938e8234f0f73">LoRaWAN::getChannel() const</a>: Get the current channel.</li>
<li>void <a class="el" href="classLoRaWAN.html#abd2edab367fdd00cf914492768491abf">LoRaWAN::setSingleChannel(bool enable, float freq_mhz, int sf, int bw, int cr, int power, int preamble)</a>: Enable or disable single channel mode.</li>
<li>bool <a class="el" href="classLoRaWAN.html#ae109afea6c71526c9d09a5f207709e71">LoRaWAN::getSingleChannel() const</a>: Check if single channel mode is enabled.</li>
<li>float <a class="el" href="classLoRaWAN.html#a9760aefccbcb32b2c3b1d8f7100aa423">LoRaWAN::getSingleChannelFrequency() const</a>: Get the frequency for single channel mode.</li>
<li>void <a class="el" href="classLoRaWAN.html#ab1834f8e6ae664fb8ccc656599eee012">LoRaWAN::setTxPower(int8_t power)</a>: Set the transmission power.</li>
<li>int <a class="el" href="classLoRaWAN.html#a07b3cc156a6db9755909d4eaa89b2ba5">LoRaWAN::getRSSI() const</a>: Get the RSSI (Received Signal Strength Indicator).</li>
<li>int <a class="el" href="classLoRaWAN.html#a3118aa09d5a8b9efc8396a261d169779">LoRaWAN::getSNR() const</a>: Get the SNR (Signal-to-Noise Ratio).</li>
<li>uint32_t <a class="el" href="classLoRaWAN.html#a65f69b3b6bb9aafca04078bd123e9d68">LoRaWAN::getFrameCounter() const</a>: Get the frame counter.</li>
<li>void <a class="el" href="classLoRaWAN.html#a7d38a71e23498fb5f04e1a65d8122362">LoRaWAN::setFrameCounter(uint32_t counter)</a>: Set the frame counter.</li>
<li>void <a class="el" href="classLoRaWAN.html#ac9082f459903f4e585977c7f43f1ded2">LoRaWAN::wake()</a>: Wake up the radio module.</li>
<li>void <a class="el" href="classLoRaWAN.html#a246a7f31dad83cec9e647514264a4137">LoRaWAN::sleep()</a>: Put the radio module to sleep.</li>
<li>bool <a class="el" href="classLoRaWAN.html#a98daefba444f0e35efeb07ab184e103b">LoRaWAN::validateKeys() const</a>: Validate the session keys.</li>
<li>void <a class="el" href="classLoRaWAN.html#a7b4f5870cd1b62d72cf7d5fcc8d1182f">LoRaWAN::enableADR(bool enable)</a>: Enable or disable ADR (Adaptive Data Rate).</li>
<li>bool <a class="el" href="classLoRaWAN.html#a1d238515892563864cde31056f01133e">LoRaWAN::isADREnabled() const</a>: Check if ADR is enabled.</li>
<li>void <a class="el" href="classLoRaWAN.html#a2660625aa37e6dced0aec051ea9a6b3f">LoRaWAN::resetSession()</a>: Reset the <a class="el" href="classLoRaWAN.html">LoRaWAN</a> session.</li>
<li>void <a class="el" href="classLoRaWAN.html#a16d697abda09f7c432712bba2cf9c9bf">LoRaWAN::applyADRSettings(uint8_t dataRate, uint8_t txPower, const std::vector&lt;uint8_t&gt;&amp; channelMask)</a>: Apply ADR settings.</li>
<li>void <a class="el" href="classLoRaWAN.html#ad3dc8eb3103944d74478caaa3735d7d1">LoRaWAN::processMACCommands(const std::vector&lt;uint8_t&gt;&amp; commands, std::vector&lt;uint8_t&gt;&amp; response)</a>: Process MAC commands.</li>
<li>void <a class="el" href="classLoRaWAN.html#aada1c8d8275c7c1a39dc9f4fda288a72">LoRaWAN::processLinkADRReq(const std::vector&lt;uint8_t&gt;&amp; cmd, size_t index, std::vector&lt;uint8_t&gt;&amp; response)</a>: Process LinkADRReq command.</li>
</ul>
<h1><a class="anchor" id="Debugging"></a>
Debugging</h1>
<p>The implementation includes several debug macros for conditional printing:</p><ul>
<li><a class="el" href="LoRaWAN_8cpp.html#af6551f0b4c3964c3128f808e7bf987c7">DEBUG_PRINT(x)</a>: Print a message if verbose mode is enabled.</li>
<li><a class="el" href="LoRaWAN_8cpp.html#a8e30ff0704664fcb13dabf0c4dc5c8f5">DEBUG_PRINTLN(x)</a>: Print a message with a newline if verbose mode is enabled.</li>
<li><a class="el" href="LoRaWAN_8cpp.html#af4ab4af96b93912a46b8c1423738ab24">DEBUG_HEX(x)</a>: Print a value in hexadecimal format if verbose mode is enabled.</li>
</ul>
<h1><a class="anchor" id="Internal"></a>
Structures</h1>
<ul>
<li>struct <a class="el" href="structLoRaWAN_1_1Impl.html">LoRaWAN::Impl</a>: Internal implementation details, including radio configuration, session keys, counters, and state management.</li>
</ul>
<h1><a class="anchor" id="Constants"></a>
Constants</h1>
<ul>
<li>BASE_FREQ: Base frequencies for different regions.</li>
<li>CHANNEL_STEP: Channel step sizes for different regions.</li>
<li>MAX_POWER: Maximum transmission power for different regions.</li>
<li>RX2_FREQ: RX2 frequencies for different regions.</li>
<li>RX2_SF: RX2 spreading factors for different regions.</li>
<li>RX2_BW: RX2 bandwidths for different regions.</li>
<li>RX2_CR: RX2 coding rates for different regions.</li>
<li>RX2_PREAMBLE: RX2 preamble lengths for different regions.</li>
<li>ADR_ACK_LIMIT: ADR acknowledgment limit.</li>
<li>ADR_ACK_DELAY: ADR acknowledgment delay.</li>
<li>MAX_CHANNELS: Maximum number of channels.</li>
<li>REGIONS: Number of supported regions.</li>
</ul>
<h1><a class="anchor" id="Enums"></a>
Enums</h1>
<ul>
<li>enum DeviceClass: Device classes (A, B, C).</li>
<li>enum JoinMode: Join modes (OTAA, ABP).</li>
<li>enum ConfirmationState: Confirmation states (NONE, WAITING_ACK, ACK_PENDING).</li>
<li>enum RxWindowState: RX window states (RX_IDLE, RX_WINDOW_1, RX_WINDOW_2, RX_CONTINUOUS).</li>
</ul>
<h1><a class="anchor" id="Typedefs"></a>
Typedefs</h1>
<ul>
<li>typedef std::function&lt;void(const Message&amp;)&gt; ReceiveCallback: Callback type for received messages.</li>
<li>typedef std::function&lt;void(bool)&gt; JoinCallback: Callback type for join events.</li>
</ul>
<h1><a class="anchor" id="Structs"></a>
Structs</h1>
<ul>
<li>struct Message: Structure representing a <a class="el" href="classLoRaWAN.html">LoRaWAN</a> message.</li>
</ul>
<h1><a class="anchor" id="Authors"></a>
Authors</h1>
<ul>
<li>Sergio Pérez (Original Author)</li>
</ul>
<h1><a class="anchor" id="License"></a>
License</h1>
<p>This code is provided under the MIT License. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af4ab4af96b93912a46b8c1423738ab24" name="af4ab4af96b93912a46b8c1423738ab24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4ab4af96b93912a46b8c1423738ab24">&#9670;&#160;</a></span>DEBUG_HEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_HEX</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; std::hex &lt;&lt; (x) &lt;&lt; std::dec; } } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af6551f0b4c3964c3128f808e7bf987c7" name="af6551f0b4c3964c3128f808e7bf987c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6551f0b4c3964c3128f808e7bf987c7">&#9670;&#160;</a></span>DEBUG_PRINT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_PRINT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x; } } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8e30ff0704664fcb13dabf0c4dc5c8f5" name="a8e30ff0704664fcb13dabf0c4dc5c8f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e30ff0704664fcb13dabf0c4dc5c8f5">&#9670;&#160;</a></span>DEBUG_PRINTLN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_PRINTLN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td>&#160;&#160;&#160;do { if(<a class="el" href="classLoRaWAN.html#acb2b3e174c7cffe495d3bdcba0e83b42">LoRaWAN::getVerbose</a>()) { std::cout &lt;&lt; x &lt;&lt; std::endl; } } while(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab0921be6ee4c38f0aac79de996405813" name="ab0921be6ee4c38f0aac79de996405813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0921be6ee4c38f0aac79de996405813">&#9670;&#160;</a></span>ch341_spi</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto ch341_spi = <a class="el" href="classSPIFactory.html#a135a7cbc8771df59615672d0e1b097b4">SPIFactory::createCH341SPI</a>(0, true)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a10a127988aa4069013339d296ba1d750" name="a10a127988aa4069013339d296ba1d750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10a127988aa4069013339d296ba1d750">&#9670;&#160;</a></span>rfm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto rfm = <a class="el" href="classRFM95.html">RFM95</a>(std::move(<a class="el" href="LoRaWAN_8cpp.html#ab0921be6ee4c38f0aac79de996405813">ch341_spi</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
